---
layout: post
title:  "Fourier never lets us down."
date:   2018-04-14
categories: problems
---

I came across this little challenge at work this week. I've been working on setting up this optoelectrical device called a Digital Micromirror Device. I will probably write some more details on that device later on, but essentially think of it as a device with small mirror pixels that can be modulate the phase and amplitude of light that reflects of it. We want to use the device to correct for phase abberations in our optical system. The way we'd do this is to measure the phase error on the light reflecting off each pixel, and set that pixel's phase to be the negative of the error, cancelling it out.

The challenge comes when you try to measure the phase error at each pixel. We put the DMD in the Fourier plane of a lens, which means that the collimated light from the DMD is being Fourier transformed by the lens, so that the light at the len's focus is the Fourier transform of the light reflecting from the DMD. This means that turning on one pixel of the DMD should give you a simple sine wave at the focus. (Really a very wide sinc function, since the pixels have some finite spatial extent.) The trick then is to turn on a reference pixel who we define to have 0 phase, and then turn on each other pixel one at the time, and measure the interference pattern caused by the overlapping sine wave from the pixel and the reference.

Here is an example of one such interference pattern, as measured on a beam profiler. Now to measure the interference pattern, one of my co-workers suggested "just do a Fourier transform - it is the sum of two waves". Of course, an interference pattern of two waves, I should just take a Fourier transform and easily get the phase difference. It was so obvious I was a little embarrassed I hadn't thought of it. So I go into python and do a Fast-Fourier Transform on the data and get this:

Which is not the two nice little peaks I was expecting. Then I remembered that a beam profiler measures the light intensity, not the amplitude. The intensity is the square of the amplitude so we have the following:
